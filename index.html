<!-- NUEVA SECCIÓN: Explorador de Archivos -->
<section class="file-explorer-section">
    <h2>Explorador de Archivos del Repositorio</h2>
    <div id="file-list" class="file-explorer"></div>
</section>

<script>
// Configuración del repo
const user = 'dsullcanic-sys';
const repo = 'INF-323---Programaci-n-Grafica';
const branch = 'main'; // o master
const baseUrlPages = `https://${user}.github.io/${repo}/`; // GitHub Pages base URL
const fileListDiv = document.getElementById('file-list');

// Cargar archivos de una carpeta
async function loadFiles(path='') {
    const url = `https://api.github.com/repos/${user}/${repo}/contents/${path}?ref=${branch}`;
    const res = await fetch(url);
    const data = await res.json();

    fileListDiv.innerHTML = '';

    // Botón para subir carpeta
    if(path) {
        const upDiv = document.createElement('div');
        upDiv.className = 'file-item';
        const parentPath = path.split('/').slice(0,-1).join('/');
        upDiv.innerHTML = `<a href="#" onclick="loadFiles('${parentPath}')">⬆️ Subir carpeta</a>`;
        fileListDiv.appendChild(upDiv);
    }

    data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'file-item';

        if(item.type === 'dir') {
            div.innerHTML = `📁 <a href="#" onclick="loadFiles('${item.path}')">${item.name}</a>`;
        } else if(item.type === 'file') {
            if(item.name.endsWith('.html')) {
                // URL de GitHub Pages para abrir HTML como página real
                let htmlUrl = baseUrlPages + item.path.replace(/ /g, '%20');
                div.innerHTML = `📄 ${item.name} <a href="${htmlUrl}" target="_blank">Abrir página</a>`;
            } else if(item.name.endsWith('.mp3')) {
                div.innerHTML = `🎵 ${item.name} <audio controls src="${item.download_url}"></audio>`;
            } else {
                div.innerHTML = `📄 ${item.name} <a href="${item.download_url}" target="_blank">Ver/Descargar</a>`;
            }
        }
        fileListDiv.appendChild(div);
    });
}

// Cargar raíz del repo
loadFiles();
</script>

<style>
.file-explorer { background: rgba(0,0,0,0.2); padding:15px; border-radius:10px; margin:20px 0; font-family: monospace;}
.file-item { margin:5px 0;}
.file-item a { color:#fff; text-decoration:none;}
.file-item a:hover { text-decoration:underline;}
</style>
