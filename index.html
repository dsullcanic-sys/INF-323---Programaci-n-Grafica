<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Programaci√≥n Gr√°fica - Explorador</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
body { background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); color:#f0f0f0; min-height:100vh; padding:20px;}
.container { max-width:1200px; margin:0 auto; padding:20px;}
header { text-align:center; padding:30px 0; margin-bottom:30px; border-bottom:2px solid rgba(255,255,255,0.1);}
h1 { font-size:2.5rem; margin-bottom:10px; color:#ffffff; text-shadow:0 2px 4px rgba(0,0,0,0.3);}
h2 { font-size:1.8rem; margin:25px 0 15px; color:#6ab1e7;}
h3 { font-size:1.4rem; margin:20px 0 10px; color:#8ec5fc;}
.file-explorer { background: rgba(0,0,0,0.2); padding:15px; border-radius:10px; margin:20px 0; font-family: monospace;}
.file-item { margin:5px 0; }
.file-item a { color:#fff; text-decoration:none; }
.file-item a:hover { text-decoration:underline; }
iframe { width:100%; height:500px; border:none; margin-top:15px; border-radius:10px;}
audio { margin-left:10px; vertical-align:middle; }
</style>
</head>
<body>
<div class="container">
<header>
    <h1>INF-323 Programaci√≥n Gr√°fica</h1>
    <p>Universidad Mayor de San Andr√©s - UMSA</p>
</header>

<h2>Explorador de Archivos</h2>
<div id="file-list" class="file-explorer"></div>
<iframe id="file-frame" src=""></iframe>

<script>
const user = 'dsullcanic-sys';
const repo = 'INF-323---Programaci-n-Grafica';
const branch = 'main'; // o master
const fileListDiv = document.getElementById('file-list');
const iframe = document.getElementById('file-frame');

async function loadFiles(path='') {
    const url = `https://api.github.com/repos/${user}/${repo}/contents/${path}?ref=${branch}`;
    const res = await fetch(url);
    const data = await res.json();

    fileListDiv.innerHTML = '';

    if(path) {
        const upDiv = document.createElement('div');
        upDiv.className = 'file-item';
        const parentPath = path.split('/').slice(0,-1).join('/');
        upDiv.innerHTML = `<a href="#" onclick="loadFiles('${parentPath}')">‚¨ÜÔ∏è Subir carpeta</a>`;
        fileListDiv.appendChild(upDiv);
    }

    data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'file-item';
        if(item.type === 'dir') {
            div.innerHTML = `üìÅ <a href="#" onclick="loadFiles('${item.path}')">${item.name}</a>`;
        } else if(item.type === 'file') {
            if(item.name === 'index.html') {
                div.innerHTML = `üìÑ ${item.name} <a href="#" onclick="iframe.src='https://dsullcanic-sys.github.io/${repo}/${item.path}'">Abrir en iframe</a>`;
            } else if(item.name.endsWith('.mp3')) {
                div.innerHTML = `üéµ ${item.name} <audio controls src="${item.download_url}"></audio>`;
            } else {
                div.innerHTML = `üìÑ ${item.name} <a href="${item.download_url}" target="_blank">Ver/Descargar</a>`;
            }
        }
        fileListDiv.appendChild(div);
    });
}

// Inicial
loadFiles();
</script>
</div>
</body>
</html>
